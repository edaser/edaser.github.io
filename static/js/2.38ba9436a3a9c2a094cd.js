webpackJsonp([2],{"10c8":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var i={name:"shixun",props:{shixun:Object},methods:{onClick:function(){if(this.shixun.identifier){var e=this.$router.resolve({name:"shixuns.$",params:{identifier:this.shixun.identifier}});console.log(e),window.open(e.href,"_blank")}},onImgError:function(e){!this.error&&this.shixun.id?(this.error=!0,e.srcElement.src="https://ali-cdn.educoder.net/images/educoder/index/shixun/shixun"+this.shixun.id%24+".jpg"):e.srcElement.src="https://ali-cdn.educoder.net/images/educoder/index/shixun/shixun"+Math.floor(24*Math.random())+".jpg"}}},a={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"shixun-card"},[n("div",{staticClass:"shixun-inner",on:{click:this.onClick}},[n("div",{staticClass:"card-img-wrp"},[n("img",{staticClass:"card-img",attrs:{src:"https://ali-cdn.educoder.net/"+this.shixun.pic,alt:"实训封面"},on:{error:this.onImgError}})]),this._v(" "),n("div",{staticClass:"card-name"},[this._v("\n      "+this._s(this.shixun.name)+"\n    ")])])])},staticRenderFns:[]};var s=t("VU/8")(i,a,!1,function(e){t("EKDv")},"data-v-50f09a15",null).exports,r=t("gyMJ"),o={data:function(){return{page:1,pagination:{per_page:12,total:0},loading:!1,inputKeyword:"",keyword:"",shixuns:[]}},created:function(){var e=this.$route.query,n=e.page,t=void 0===n?1:n,i=e.keyword;this.page=t,this.keyword=i,console.log(i),this.pullShixuns({page:t,keyword:i})},watch:{page:function(e){if(this.$route.query.page!=e){var n={page:e};this.$router.replace({query:n})}}},methods:{placeholder:function(e){for(var n=[],t=e.length;t<12;t++)n.push({});return n},showFeedbackDialog:function(){var e=this;this.$msgbox({title:"意见反馈",roundButton:!0,closeOnClickModal:!1,closeOnPressEscape:!1,showCancelButton:!0,confirmButtonText:"提交",showInput:!0,center:!0,customClass:"feedback-dialog",inputType:"textarea",inputPlaceholder:"请输入文字"}).then(function(n){console.info(n);var t=n.value;t?Object(r.a)({name:"feedback",data:{value:t}}).then(function(n){e.$notify({type:"success",message:"提交成功"})}).catch(function(n){e.$notify({type:"error",message:"服务错误，提交失败"})}):console.info("没有反馈内容")})},pullShixuns:function(e){var n=this,t=e.page,i=e.keyword;t=parseInt(t);return this.loading=!0,Object(r.a)({name:"shixuns",data:{page:t,per_page:12,keyword:i}}).then(function(e){n.shixuns=e.data.shixuns,n.pagination=e.data.pagination,console.log(n.shixuns),n.inputKeyword=i,n.page=t}).catch(function(e){var t=e.message||e.errMsg||"网络错误";n.$notify({type:"warning",message:t}),console.error(e)}).finally(function(){n.loading=!1})},enterShixunByUrl:function(e){var n=this,t=e.url,i=(void 0===t?"":t).match(/shixuns\/([^\/]+)/);if(console.log(i),i){var a=this.$message({iconClass:"el-icon-loading",message:"搜索中"}),s=i[1];Object(r.a)({name:"shixunExist",data:{identifier:s}}).then(function(e){console.log(e),a.close();var t=n.$router.resolve({name:"shixuns.$",params:{identifier:s}});console.log(t),window.open(t.href,"_blank")}).catch(function(e){console.log(e),a.close(),n.$notify({type:"warning",message:e.message||"服务错误"})})}else this.$alert("请输入带shixuns/的网址，例如：www.educoder.net/shixuns/cbnfxeiw","实训网址格式错误",{type:"warning"})},search:function(){var e=this.inputKeyword||"";e.match(/www\.|https?:|shixuns\/|tasks\/|educoder\.net\//)?(this.keyword="",this.enterShixunByUrl({url:e})):(this.keyword=e,this.pullShixuns({keyword:this.keyword,page:1}))},changeCurrentPage:function(e){console.log("changeCurrentPage");var n=this.keyword;e<=0||(e-1)*this.pagination.per_page>=this.pagination.total?console.warn("current page out of range"):this.pullShixuns({page:e,keyword:n})}},components:{shixun:s}},c={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"head-bar"},[t("el-input",{staticClass:"search-bar",attrs:{placeholder:"请输入实训名称或实训网址",maxlength:"60",clearable:!0},on:{clear:function(n){e.keyword="",e.search()}},nativeOn:{keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:(n.preventDefault(),e.search(n))}},model:{value:e.inputKeyword,callback:function(n){e.inputKeyword=n},expression:"inputKeyword"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1),e._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-body"},[t("img",{class:["arrow",e.page<=1?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"上一页",title:"上一页"},on:{click:function(n){return e.changeCurrentPage(e.page-1)}}}),e._v(" "),t("div",{staticClass:"shixun-list-wrap"},[0!=e.shixuns.length||e.loading?t("div",{staticClass:"shixun-list"},[e._l(e.shixuns,function(e){return t("shixun",{key:e.id,staticClass:"shixun-card",attrs:{shixun:e}})}),e._v(" "),e._l(e.placeholder(e.shixuns),function(e){return t("shixun",{key:e.id,staticClass:"shixun-card place-holder",attrs:{shixun:e}})})],2):t("div",{staticClass:"no-data"},[t("el-empty",{attrs:{description:"很抱歉，没有更多相关的实训"}})],1)]),e._v(" "),t("img",{class:["arrow","right",e.page*e.pagination.per_page>=e.pagination.total?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"下一页",title:"下一页"},on:{click:function(n){return e.changeCurrentPage(e.page+1)}}})]),e._v(" "),t("div",{staticStyle:{"text-align":"center",padding:"12px"}},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page,"page-size":e.pagination.per_page,total:e.pagination.total},on:{"current-change":e.changeCurrentPage}})],1),e._v(" "),t("div",{staticClass:"feedback",on:{click:e.showFeedbackDialog}},[e._v("意见反馈")])])},staticRenderFns:[]};var l=t("VU/8")(o,c,!1,function(e){t("mP7p"),t("baKZ")},"data-v-2b3467f4",null);n.default=l.exports},EKDv:function(e,n){},baKZ:function(e,n){},mP7p:function(e,n){}});