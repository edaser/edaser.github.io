webpackJsonp([2],{"10c8":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={name:"shixun",props:{shixun:Object},methods:{onImgError:function(n){var e=n.srcElement;e.src="https://ali-cdn.educoder.net/images/educoder/index/shixun/shixun"+e.dataset.id%24+".jpg"},enterShixun:function(n){}},mounted:function(){}},a={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",{staticClass:"shixun-card"},[t("router-link",{attrs:{tag:"a",target:"_blank",to:{name:"shixuns.$",params:{identifier:n.shixun.identifier}}}},[t("div",{staticClass:"card-img-wrp"},[t("img",{staticClass:"card-img",attrs:{src:"https://ali-cdn.educoder.net/"+n.shixun.pic,alt:"实训图片","data-id":n.shixun.id},on:{error:function(e){return n.onImgError()}}})]),n._v(" "),t("div",{staticClass:"card-name"},[n._v("\n      "+n._s(n.shixun.name)+"\n    ")])])],1)},staticRenderFns:[]};var i=t("VU/8")(s,a,!1,function(n){t("xNwE")},"data-v-e0b2af02",null).exports,o=t("gyMJ"),r={created:function(){var n=this.$route.query,e=n.page,t=void 0===e?1:e,s=n.keyword;this.page=t,this.keyword=s,console.log(s),this.getShixuns({page:t,keyword:s})},watch:{onlyShowUnlock:function(n,e){this.getShixuns({page:1,keyword:this.keyword})}},methods:{requestUnlock:function(){var n=this;this.$prompt("示例:\nwww.educoder.net/shixuns/uznmbg54/challenges","请输入实训网址",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/www.educoder.net\/shixuns\/([^\/]+)/,inputErrorMessage:"链接格式不正确",closeOnClickModal:!1}).then(function(e){console.log(e);var t=e.value.match(/www.educoder.net\/shixuns\/([^\/]+)/);if(console.log(t),t){var s=t[1];console.log(s);var a=n.$message({message:"后台解锁中，请耐心排队等待",iconClass:"el-icon-loading"});n.$http.post("/api/shixuns/"+s+"/answers/unlock").then(function(e){var t=e.data;console.log(t),0==t.status?n.$router.push({name:"shixun",params:{identifier:s}}):(n.$notify({type:"warning",title:"提示",message:t.message}),-2==t.status&&n.$alert("后台账号金币不足，暂时无法解锁该答案 >_< 。\n解锁请求已记录并开始排队等待解锁，当后台账号积攒到一定量金币后会解锁该实训答案","提示"))}).catch(function(n){}).finally(function(n){a.close()})}else n.$notify({type:"warning",title:"警告",message:"解析链接失败"})}).catch(function(n){console.warn(n)})},showInputLink:function(){var n=this;this.$prompt("示例:\nwww.educoder.net/shixuns/uznmbg54/challenges","请输入实训网址",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/www.educoder.net\/shixuns\/([^\/]+)/,inputErrorMessage:"链接格式不正确",closeOnClickModal:!1}).then(function(e){console.log(e);var t=e.value.match(/www.educoder.net\/shixuns\/([^\/]+)/);if(console.log(t),t){var s=t[1];console.log(s);var a=n.$message({message:"查询中...",iconClass:"el-icon-loading"});n.$http.get("/api/shixuns/"+s+"/exists").then(function(e){var t=e.data;console.log(t),t.data?window.open("/shixuns/"+s):n.$notify({type:"warning",title:"提示",message:t.message||"该实训的答案暂未收录😭"})}).catch(function(n){}).finally(function(n){a.close()})}else n.$notify({type:"warning",title:"警告",message:"解析链接失败"})}).catch(function(n){console.warn(n)})},getShixuns:function(n){var e=this,t=n.page;n.keyword;t=parseInt(t);this.loading=!0,this.onlyShowUnlock&&t>10||!this.onlyShowUnlock&&t>12?setTimeout(function(){e.shixuns=[];var n={page:t};e.$router.replace({query:n}),e.page=t,e.loading=!1},800):this.onlyShowUnlock?Object(o.a)({name:"shixuns",data:{page:t,per_page:12}}).then(function(n){e.shixuns=n.data.shixuns,console.log(e.shixuns);var s={page:t};e.page=t,e.$router.replace({query:s}),console.log("replace route")}).catch(function(n){console.error(n)}).finally(function(){e.loading=!1}):Object(o.a)({name:"shixuns",data:{page:t,per_page:12}}).then(function(n){e.shixuns=n.data.shixuns,e.page=t;var s={page:t};e.$router.replace({query:s})}).finally(function(){e.loading=!1})},search:function(){console.log(this.keyword),this.getShixuns({keyword:this.keyword,page:1})},changePage:function(n){var e=n.delta;console.log("changePage");var t=this.page,s=void 0===t?1:t,a=this.keyword;console.log({page:s,keyword:a});var i=parseInt(s)+e;console.log(i),i<=0||this.getShixuns({page:i,keyword:a})},lastPage:function(){this.page<=1||this.changePage({delta:-1})},nextPage:function(){this.shixuns.length<12||this.changePage({delta:1})}},components:{shixun:i},data:function(){return{title:"实训列表",shixun_link:"",dialogVisible:!1,page:1,loading:!1,keyword:"",shixuns:[],onlyShowUnlock:!1}}},c={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[n._e(),n._v(" "),t("div",{staticClass:"main-body"},[t("img",{class:["arrow",n.page<=1?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"上一页"},on:{click:n.lastPage}}),n._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"shixun-list"},n._l(n.shixuns,function(n){return t("shixun",{key:n.id,attrs:{shixun:n}})}),1),n._v(" "),t("img",{class:["arrow","right",n.shixuns.length<12?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"下一页"},on:{click:n.nextPage}})]),n._v(" "),0!=n.shixuns.length||n.loading?n._e():t("div",{staticClass:"no-data"},[t("div",[n._v("很抱歉，没有更多相关实训了")])]),n._v(" "),t("div",{staticClass:"bottom-nav"},[t("span",{class:["nav-item",n.page<=1?"disable":""],on:{click:n.lastPage}},[n._v("上一页")]),n._v(" "),t("span",[n._v("第"+n._s(n.page)+"页")]),n._v(" "),t("span",{class:["nav-item",n.shixuns.length<12?"disable":""],on:{click:n.nextPage}},[n._v("下一页")])])])},staticRenderFns:[]};var l=t("VU/8")(r,c,!1,function(n){t("rHzw")},"data-v-75566c92",null);e.default=l.exports},rHzw:function(n,e){},xNwE:function(n,e){}});