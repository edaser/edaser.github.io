webpackJsonp([2],{"10c8":function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i={name:"shixun",props:{shixun:Object},methods:{onClick:function(){if(this.shixun.identifier){var n=this.$router.resolve({name:"shixuns.$",params:{identifier:this.shixun.identifier}});console.log(n),window.open(n.href,"_blank")}},onImgError:function(n){!this.error&&this.shixun.id&&(this.error=!0,n.srcElement.src="https://ali-cdn.educoder.net/images/educoder/index/shixun/shixun"+this.shixun.id%24+".jpg")}}},a={render:function(){var n=this.$createElement,e=this._self._c||n;return e("div",{staticClass:"shixun-card"},[e("div",{staticClass:"shixun-inner",on:{click:this.onClick}},[e("div",{staticClass:"card-img-wrp"},[e("img",{staticClass:"card-img",attrs:{src:"https://ali-cdn.educoder.net/"+this.shixun.pic,alt:"实训封面"},on:{error:this.onImgError}})]),this._v(" "),e("div",{staticClass:"card-name"},[this._v("\n      "+this._s(this.shixun.name)+"\n    ")])])])},staticRenderFns:[]};var s=t("VU/8")(i,a,!1,function(n){t("PCfp")},"data-v-94d4faba",null).exports,r=t("gyMJ"),o={data:function(){return{page:1,pagination:{per_page:12,total:0},loading:!1,inputKeyword:"",keyword:"",shixuns:[]}},created:function(){var n=this.$route.query,e=n.page,t=void 0===e?1:e,i=n.keyword;this.page=t,this.keyword=i,console.log(i),this.pullShixuns({page:t,keyword:i})},watch:{page:function(n){if(this.$route.query.page!=n){var e={page:n};this.$router.replace({query:e})}}},methods:{placeholder:function(n){for(var e=[],t=n.length;t<12;t++)e.push({});return e},showInputLinkDialog:function(){var n=this;this.$prompt("示例:\nwww.educoder.net/shixuns/uznmbg54/challenges","请输入实训网址",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/www.educoder.net\/shixuns\/([^\/]+)/,inputErrorMessage:"链接格式不正确",closeOnClickModal:!1}).then(function(e){console.log(e);var t=e.value.match(/www.educoder.net\/shixuns\/([^\/]+)/);if(console.log(t),t){var i=t[1];console.log(i);var a=n.$message({message:"查询中...",iconClass:"el-icon-loading"});n.$http.get("/api/shixuns/"+i+"/exists").then(function(e){var t=e.data;console.log(t),t.data?window.open("/shixuns/"+i):n.$notify({type:"warning",title:"提示",message:t.message||"该实训的答案暂未收录😭"})}).catch(function(n){}).finally(function(n){a.close()})}else n.$notify({type:"warning",title:"警告",message:"解析链接失败"})}).catch(function(n){console.warn(n)})},pullShixuns:function(n){var e=this,t=n.page,i=n.keyword;t=parseInt(t);return this.loading=!0,Object(r.a)({name:"shixuns",data:{page:t,per_page:12,keyword:i}}).then(function(n){e.shixuns=n.data.shixuns,e.pagination=n.data.pagination,console.log(e.shixuns),e.inputKeyword=i,e.page=t}).catch(function(n){console.error(n)}).finally(function(){e.loading=!1})},search:function(){this.keyword=this.inputKeyword,this.pullShixuns({keyword:this.keyword,page:1})},changeCurrentPage:function(n){console.log("changeCurrentPage");var e=this.keyword;n<=0||(n-1)*this.pagination.per_page>=this.pagination.total?console.warn("current page out of range"):this.pullShixuns({page:n,keyword:e})}},components:{shixun:s}},c={render:function(){var n=this,e=n.$createElement,t=n._self._c||e;return t("div",[t("div",{staticClass:"head-bar"},[t("el-input",{staticClass:"search-bar",attrs:{placeholder:"请输入实训名称",maxlength:"40",clearable:!0},on:{clear:function(e){n.keyword="",n.search()}},nativeOn:{keydown:function(e){return!e.type.indexOf("key")&&n._k(e.keyCode,"enter",13,e.key,"Enter")?null:n.search(e)}},model:{value:n.inputKeyword,callback:function(e){n.inputKeyword=e},expression:"inputKeyword"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:n.search},slot:"append"},[n._v("搜索")])],1)],1),n._v(" "),t("div",{staticClass:"main-body"},[t("img",{class:["arrow",n.page<=1?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"上一页",title:"上一页"},on:{click:function(e){return n.changeCurrentPage(n.page-1)}}}),n._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:n.loading,expression:"loading"}],staticClass:"shixun-list-wrap"},[t("div",{staticClass:"shixun-list"},[n._l(n.shixuns,function(n){return t("shixun",{key:n.id,staticClass:"shixun-card",attrs:{shixun:n}})}),n._v(" "),n._l(n.placeholder(n.shixuns),function(n){return t("shixun",{key:n.id,staticClass:"shixun-card place-holder",attrs:{shixun:n}})})],2)]),n._v(" "),t("img",{class:["arrow","right",n.page*n.pagination.per_page>=n.pagination.total?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"下一页",title:"下一页"},on:{click:function(e){return n.changeCurrentPage(n.page+1)}}})]),n._v(" "),0!=n.shixuns.length||n.loading?n._e():t("div",{staticClass:"no-data"},[t("h2",[n._v("很抱歉，没有更多相关的实训")])]),n._v(" "),t("div",{staticStyle:{"text-align":"center",padding:"12px"}},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":n.page,"page-size":n.pagination.per_page,total:n.pagination.total},on:{"current-change":n.changeCurrentPage}})],1)])},staticRenderFns:[]};var l=t("VU/8")(o,c,!1,function(n){t("OXy5")},"data-v-73a1858c",null);e.default=l.exports},OXy5:function(n,e){},PCfp:function(n,e){}});