webpackJsonp([2],{"10c8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("mvHQ"),i=n.n(a),s={name:"shixun",props:{shixun:Object},data:function(){return{defaultPic:"images/educoder/index/shixun/shixun0.jpg"}},methods:{onClick:function(){if(console.info("click shixun card",this.shixun),this.shixun.identifier){var e=this.$router.resolve({name:"shixuns.$",params:{identifier:this.shixun.identifier}});console.log(e),window.open(e.href,"_blank")}},onImgError:function(e){console.log("img error",this.shixun),!this.error&&this.shixun.id?(this.error=!0,e.srcElement.src="https://ali-cdn.educoder.net/images/educoder/index/shixun/shixun"+this.shixun.id%24+".jpg"):e.srcElement.src="https://ali-cdn.educoder.net/images/educoder/index/shixun/shixun"+Math.floor(24*Math.random())+".jpg"}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"shixun-card"},[n("div",{staticClass:"shixun-inner",on:{click:e.onClick}},[n("div",{staticClass:"card-img-wrp"},[n("img",{staticClass:"card-img",attrs:{src:"https://ali-cdn.educoder.net/"+(e.shixun.pic?e.shixun.pic:e.defaultPic),alt:"实训封面"},on:{error:e.onImgError}})]),e._v(" "),n("div",{staticClass:"card-name"},[e._v("\n      "+e._s(e.shixun.name)+"\n    ")])])])},staticRenderFns:[]};var o=n("VU/8")(s,r,!1,function(e){n("ftmh")},"data-v-5307bc0b",null).exports,c=n("gyMJ"),l={data:function(){return{page:1,pagination:{per_page:12,total:0},loading:!1,inputKeyword:"",keyword:"",shixuns:[]}},created:function(){var e=this.$route.query,t=e.page,n=void 0===t?1:t,a=e.keyword;n=parseInt(n)||1,this.page=n,this.keyword=a,console.log(a),this.pullShixuns({page:n,keyword:a})},computed:{queryParam:function(){return{keyword:this.keyword,page:this.page}}},watch:{queryParam:function(e){this.$router.replace({query:e})}},methods:{placeholder:function(e){for(var t=[],n=e.length;n<12;n++)t.push({identifier:"",id:"",name:"."});return t},showFeedbackDialog:function(){var e=this;this.$msgbox({title:"意见反馈",roundButton:!0,closeOnClickModal:!1,closeOnPressEscape:!1,showCancelButton:!0,confirmButtonText:"提交",showInput:!0,center:!0,customClass:"feedback-dialog",inputType:"textarea",inputPlaceholder:"请输入文字"}).then(function(t){console.info(t);var n=t.value;n?Object(c.a)({name:"feedback",data:{value:n}}).then(function(t){e.$notify({type:"success",message:"提交成功"})}).catch(function(t){e.$notify({type:"error",message:"服务错误，提交失败"})}):console.info("没有反馈内容")})},showInputLinkDialog:function(){var e=this;this.$prompt("示例:\nwww.educoder.net/shixuns/uznmbg54/challenges","请输入实训网址",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/shixuns\/([0-9,a-z]+)/,inputErrorMessage:"网址格式不正确",inputPlaceholder:"请输入实训网址",closeOnClickModal:!0}).then(function(t){var n=t.value;e.enterShixunByUrl({url:n})}).catch(function(e){console.warn(e)})},saveFirstPage:function(e){return localStorage.setItem("first_page_data",i()(e)),!0},loadFirstPage:function(){var e=localStorage.getItem("first_page_data");if(e){var t=JSON.parse(e);return this.shixuns=t.shixuns,this.pagination=t.pagination,this.page=1,console.info("load storage shixuns data",t),!0}return console.info("no data to load from storage for  shixuns data"),!1},pullShixuns:function(e){var t=this,n=e.page,a=e.keyword;if(1!=n||a||!this.loadFirstPage()){n=parseInt(n)||1;return this.loading=!0,Object(c.a)({name:"shixuns",data:{page:n,per_page:12,keyword:a},config:{method:"get"}}).then(function(e){1!=n||a||t.saveFirstPage(e.data),t.shixuns=e.data.shixuns,t.pagination=e.data.pagination,console.log(t.shixuns),t.inputKeyword=a,t.page=n}).catch(function(e){var n=e.message||e.errMsg||"网络错误";t.$notify({type:"warning",message:n}),console.error(e)}).finally(function(){t.loading=!1})}},enterShixunByUrl:function(e){var t=this,n=e.url,a=(void 0===n?"":n).match(/shixuns\/([0-9,a-z]+)/);if(console.log(a),a){var i=this.$message({iconClass:"el-icon-loading",message:"搜索中"}),s=a[1];Object(c.a)({name:"shixunExist",data:{identifier:s},config:{method:"get"}}).then(function(e){console.log(e),i.close();var n=t.$router.resolve({name:"shixuns.$",params:{identifier:s}});console.log(n),window.open(n.href,"_blank")}).catch(function(e){console.log(e),i.close(),t.$notify({type:"warning",message:e.message||"服务错误"})})}else this.$alert("请输入带shixuns/的网址，例如：www.educoder.net/shixuns/cbnfxeiw","实训网址格式错误",{type:"warning"})},onClearSearchInput:function(){this.keyword="",this.pullShixuns({keyword:this.keyword,page:1})},search:function(){var e=this.inputKeyword||"";e.match(/www\.|https?:|shixuns\/|tasks\/|educoder\.net\//)?this.enterShixunByUrl({url:e}):(this.keyword=e,this.pullShixuns({keyword:this.keyword,page:1}))},changeCurrentPage:function(e){console.log("changeCurrentPage");var t=this.keyword;e<=0||(e-1)*this.pagination.per_page>=this.pagination.total?console.warn("current page out of range"):this.pullShixuns({page:e,keyword:t})}},components:{shixun:o}},u={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{staticClass:"head-bar"},[e._m(0),e._v(" "),n("div",{staticClass:"search-wrap"},[n("el-input",{staticClass:"search-bar",attrs:{placeholder:"请输入实训名称或实训网址",maxlength:"60",clearable:!0},on:{clear:e.onClearSearchInput},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:(t.preventDefault(),e.search(t))}},model:{value:e.inputKeyword,callback:function(t){e.inputKeyword=t},expression:"inputKeyword"}},[n("el-button",{staticClass:"search-btn",attrs:{slot:"append",type:"primary",plain:"",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1),e._v(" "),n("div",{staticClass:"head-append"})]),e._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"main-body"},[n("img",{class:["arrow",e.page<=1?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"上一页",title:"上一页"},on:{click:function(t){return e.changeCurrentPage(e.page-1)}}}),e._v(" "),n("div",{staticClass:"shixun-list-wrap"},[0!=e.shixuns.length||e.loading?n("div",{staticClass:"shixun-list"},[e._l(e.shixuns,function(e){return n("shixun",{key:e.id,staticClass:"shixun-card",attrs:{shixun:e}})}),e._v(" "),e._l(e.placeholder(e.shixuns),function(e){return n("shixun",{key:e.id,staticClass:"shixun-card place-holder",attrs:{shixun:e}})})],2):n("div",{staticClass:"no-data"},[n("el-empty",{attrs:{description:"很抱歉，没有更多相关的实训"}}),e._v(" "),n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:e.showInputLinkDialog}},[e._v("用实训网址查询")])],1)]),e._v(" "),n("img",{class:["arrow","right",e.page*e.pagination.per_page>=e.pagination.total?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"下一页",title:"下一页"},on:{click:function(t){return e.changeCurrentPage(e.page+1)}}})]),e._v(" "),n("div",{staticStyle:{"text-align":"center",padding:"12px"}},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page,"page-size":e.pagination.per_page,total:e.pagination.total},on:{"current-change":e.changeCurrentPage}})],1),e._v(" "),n("div",{staticClass:"feedback",on:{click:e.showFeedbackDialog}},[e._v("意见反馈")])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"web-icon-wrap"},[t("img",{staticClass:"web-icon",attrs:{src:"static/images/touch/icon.png",alt:""}})])}]};var h=n("VU/8")(l,u,!1,function(e){n("19sv"),n("AgTN")},"data-v-2ea7f705",null);t.default=h.exports},"19sv":function(e,t){},AgTN:function(e,t){},ftmh:function(e,t){}});