webpackJsonp([2],{"10c8":function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a={name:"shixun",props:{shixun:Object},methods:{onImgError:function(e){console.log("image error",e);var n=e.srcElement;n.src="https://ali-cdn.educoder.net/images/educoder/index/shixun/shixun"+n.dataset.id%24+".jpg"},enterShixun:function(e){}},mounted:function(){}},i={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"shixun-card"},[t("router-link",{attrs:{tag:"a",target:"_blank",to:{name:"shixuns.$",params:{identifier:e.shixun.identifier}}}},[t("div",{staticClass:"card-img-wrp"},[t("img",{staticClass:"card-img",attrs:{src:"https://ali-cdn.educoder.net/"+e.shixun.pic,alt:"实训图片","data-id":e.shixun.id},on:{error:e.onImgError}})]),e._v(" "),t("div",{staticClass:"card-name"},[e._v("\n      "+e._s(e.shixun.name)+"\n    ")])])],1)},staticRenderFns:[]};var s=t("VU/8")(a,i,!1,function(e){t("hP/q")},"data-v-073aac64",null).exports,r=t("gyMJ"),o={data:function(){return{page:1,pagination:{per_page:12,total:0},loading:!1,inputKeyword:"",keyword:"",shixuns:[]}},created:function(){var e=this.$route.query,n=e.page,t=void 0===n?1:n,a=e.keyword;this.page=t,this.keyword=a,console.log(a),this.pullShixuns({page:t,keyword:a})},watch:{page:function(e){if(this.$route.query.page!=e){var n={page:e};this.$router.replace({query:n})}}},methods:{showInputLinkDialog:function(){var e=this;this.$prompt("示例:\nwww.educoder.net/shixuns/uznmbg54/challenges","请输入实训网址",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/www.educoder.net\/shixuns\/([^\/]+)/,inputErrorMessage:"链接格式不正确",closeOnClickModal:!1}).then(function(n){console.log(n);var t=n.value.match(/www.educoder.net\/shixuns\/([^\/]+)/);if(console.log(t),t){var a=t[1];console.log(a);var i=e.$message({message:"查询中...",iconClass:"el-icon-loading"});e.$http.get("/api/shixuns/"+a+"/exists").then(function(n){var t=n.data;console.log(t),t.data?window.open("/shixuns/"+a):e.$notify({type:"warning",title:"提示",message:t.message||"该实训的答案暂未收录😭"})}).catch(function(e){}).finally(function(e){i.close()})}else e.$notify({type:"warning",title:"警告",message:"解析链接失败"})}).catch(function(e){console.warn(e)})},pullShixuns:function(e){var n=this,t=e.page,a=e.keyword;t=parseInt(t);return this.loading=!0,Object(r.a)({name:"shixuns",data:{page:t,per_page:12,keyword:a}}).then(function(e){n.shixuns=e.data.shixuns,n.pagination=e.data.pagination,console.log(n.shixuns),n.inputKeyword=a,n.page=t}).catch(function(e){console.error(e)}).finally(function(){n.loading=!1})},search:function(){this.keyword=this.inputKeyword,this.pullShixuns({keyword:this.keyword,page:1})},changeCurrentPage:function(e){console.log("changeCurrentPage");var n=this.keyword;e<=0||(e-1)*this.pagination.per_page>=this.pagination.total?console.warn("current page out of range"):this.pullShixuns({page:e,keyword:n})}},components:{shixun:s}},c={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[t("div",{staticClass:"head-bar"},[t("el-input",{staticClass:"search-bar",attrs:{placeholder:"请输入实训名称",maxlength:"40",clearable:!0},on:{clear:function(n){e.keyword="",e.search()}},nativeOn:{keydown:function(n){return!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter")?null:e.search(n)}},model:{value:e.inputKeyword,callback:function(n){e.inputKeyword=n},expression:"inputKeyword"}},[t("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.search},slot:"append"},[e._v("搜索")])],1)],1),e._v(" "),t("div",{staticClass:"main-body"},[t("img",{class:["arrow",e.page<=1?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"上一页"},on:{click:function(n){return e.changeCurrentPage(e.page-1)}}}),e._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"shixun-list"},e._l(e.shixuns,function(e){return t("shixun",{key:e.id,attrs:{shixun:e}})}),1),e._v(" "),t("img",{class:["arrow","right",e.page*e.pagination.per_page>=e.pagination.total?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"下一页"},on:{click:function(n){return e.changeCurrentPage(e.page+1)}}})]),e._v(" "),0!=e.shixuns.length||e.loading?e._e():t("div",{staticClass:"no-data"},[t("h2",[e._v("很抱歉，没有更多相关的实训")])]),e._v(" "),t("div",{staticStyle:{"text-align":"center"}},[t("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":e.page,"page-size":e.pagination.per_page,total:e.pagination.total},on:{"current-change":e.changeCurrentPage}})],1)])},staticRenderFns:[]};var u=t("VU/8")(o,c,!1,function(e){t("H64F")},"data-v-5cc3bc5b",null);n.default=u.exports},H64F:function(e,n){},"hP/q":function(e,n){}});