webpackJsonp([1],{"6ZYr":function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("lRwf"),i=t.n(a),s=t("//Fk"),o=t.n(s);function r(e){var n=e.name,t=e.data;return new o.a(function(e,a){i.a.http.post("https://edaser-re5fv-1302719275.ap-shanghai.app.tcloudbase.com/api",{name:n,data:t}).then(function(t){if(console.debug("callApi "+n+", status:"+t.data.status,t.data.data),t.data.status<0||t.data.status>100){var i=new Error(t.data.message);a(i)}else e(t.data)}).catch(function(e){a(e)})})}var c={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var l=t("VU/8")({name:"App",created:function(){}},c,!1,function(e){t("VPg6")},null,null).exports,u=t("pRNm"),h=t.n(u),d={name:"shixun",props:{shixun:Object},methods:{onImgError:function(e){var n=e.srcElement;n.src="https://ali-cdn.educoder.net/images/educoder/index/shixun/shixun"+n.dataset.id%24+".jpg"}},mounted:function(){}},g={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"shixun-card"},[t("router-link",{attrs:{tag:"a",target:"_blank",to:{name:"shixun",params:{identifier:e.shixun.identifier}}}},[t("div",{staticClass:"card-img-wrp"},[t("img",{staticClass:"card-img",attrs:{src:"https://ali-cdn.educoder.net/"+e.shixun.pic,alt:"实训图片","data-id":e.shixun.id},on:{error:function(n){return e.onImgError()}}})]),e._v(" "),t("div",{staticClass:"card-name"},[e._v("\n      "+e._s(e.shixun.name)+"\n    ")])])],1)},staticRenderFns:[]};var p={created:function(){var e=this.$route.query,n=e.page,t=void 0===n?1:n,a=e.keyword;this.page=t,this.keyword=a,console.log(a),this.getShixuns({page:t,keyword:a})},watch:{onlyShowUnlock:function(e,n){this.getShixuns({page:1,keyword:this.keyword})}},methods:{requestUnlock:function(){var e=this;this.$prompt("示例:\nwww.educoder.net/shixuns/uznmbg54/challenges","请输入实训网址",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/www.educoder.net\/shixuns\/([^\/]+)/,inputErrorMessage:"链接格式不正确",closeOnClickModal:!1}).then(function(n){console.log(n);var t=n.value.match(/www.educoder.net\/shixuns\/([^\/]+)/);if(console.log(t),t){var a=t[1];console.log(a);var i=e.$message({message:"后台解锁中，请耐心排队等待",iconClass:"el-icon-loading"});e.$http.post("/api/shixuns/"+a+"/answers/unlock").then(function(n){var t=n.data;console.log(t),0==t.status?e.$router.push({name:"shixun",params:{identifier:a}}):(e.$notify({type:"warning",title:"提示",message:t.message}),-2==t.status&&e.$alert("后台账号金币不足，暂时无法解锁该答案 >_< 。\n解锁请求已记录并开始排队等待解锁，当后台账号积攒到一定量金币后会解锁该实训答案","提示"))}).catch(function(e){}).finally(function(e){i.close()})}else e.$notify({type:"warning",title:"警告",message:"解析链接失败"})}).catch(function(e){console.warn(e)})},showInputLink:function(){var e=this;this.$prompt("示例:\nwww.educoder.net/shixuns/uznmbg54/challenges","请输入实训网址",{confirmButtonText:"确定",cancelButtonText:"取消",inputPattern:/www.educoder.net\/shixuns\/([^\/]+)/,inputErrorMessage:"链接格式不正确",closeOnClickModal:!1}).then(function(n){console.log(n);var t=n.value.match(/www.educoder.net\/shixuns\/([^\/]+)/);if(console.log(t),t){var a=t[1];console.log(a);var i=e.$message({message:"查询中...",iconClass:"el-icon-loading"});e.$http.get("/api/shixuns/"+a+"/exists").then(function(n){var t=n.data;console.log(t),t.data?window.open("/shixuns/"+a):e.$notify({type:"warning",title:"提示",message:t.message||"该实训的答案暂未收录😭"})}).catch(function(e){}).finally(function(e){i.close()})}else e.$notify({type:"warning",title:"警告",message:"解析链接失败"})}).catch(function(e){console.warn(e)})},getShixuns:function(e){var n=this,t=e.page;e.keyword;t=parseInt(t);this.loading=!0,this.onlyShowUnlock&&t>10||!this.onlyShowUnlock&&t>12?setTimeout(function(){n.shixuns=[];var e={page:t};n.$router.replace({query:e}),n.page=t,n.loading=!1},800):this.onlyShowUnlock?r({name:"shixuns",data:{page:t,per_page:12}}).then(function(e){n.shixuns=e.data.shixuns,console.log(n.shixuns);var a={page:t};n.page=t,n.$router.replace({query:a}),console.log("replace route")}).catch(function(e){console.error(e)}).finally(function(){n.loading=!1}):r({name:"shixuns",data:{page:t,per_page:12}}).then(function(e){n.shixuns=e.data.shixuns,n.page=t;var a={page:t};n.$router.replace({query:a})}).finally(function(){n.loading=!1})},search:function(){console.log(this.keyword),this.getShixuns({keyword:this.keyword,page:1})},changePage:function(e){var n=e.delta;console.log("changePage");var t=this.page,a=void 0===t?1:t,i=this.keyword;console.log({page:a,keyword:i});var s=parseInt(a)+n;console.log(s),s<=0||this.getShixuns({page:s,keyword:i})},lastPage:function(){this.page<=1||this.changePage({delta:-1})},nextPage:function(){this.shixuns.length<12||this.changePage({delta:1})}},components:{shixun:t("VU/8")(d,g,!1,function(e){t("Sj3z")},"data-v-e4a65e98",null).exports},data:function(){return{title:"实训列表",shixun_link:"",dialogVisible:!1,page:1,loading:!1,keyword:"",shixuns:[],onlyShowUnlock:!1}}},f={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e._e(),e._v(" "),t("div",{staticClass:"main-body"},[t("img",{class:["arrow",e.page<=1?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"上一页"},on:{click:e.lastPage}}),e._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"shixun-list"},e._l(e.shixuns,function(e){return t("shixun",{key:e.id,attrs:{shixun:e}})}),1),e._v(" "),t("img",{class:["arrow","right",e.shixuns.length<12?"disable":""],attrs:{src:"/static/images/arrow.jpg",alt:"下一页"},on:{click:e.nextPage}})]),e._v(" "),0!=e.shixuns.length||e.loading?e._e():t("div",{staticClass:"no-data"},[t("div",[e._v("很抱歉，没有更多相关实训了")])]),e._v(" "),t("div",{staticClass:"bottom-nav"},[t("span",{class:["nav-item",e.page<=1?"disable":""],on:{click:e.lastPage}},[e._v("上一页")]),e._v(" "),t("span",[e._v("第"+e._s(e.page)+"页")]),e._v(" "),t("span",{class:["nav-item",e.shixuns.length<12?"disable":""],on:{click:e.nextPage}},[e._v("下一页")])])])},staticRenderFns:[]};var v=t("VU/8")(p,f,!1,function(e){t("rHzw")},"data-v-75566c92",null).exports,m={created:function(){var e=this.$route.params.identifier;this.identifier=e,this.refresh()},methods:{refresh:function(){var e=this;this.loading=!0,r({name:"shixun",data:{identifier:this.identifier}}).then(function(n){e.shixun=n.data.shixun,e.challenge_list=n.data.challenge_list,e.loading=!1}).catch(function(n){e.loading=!1})},getAnalysis:function(e){var n=this,t=localStorage.getItem("challenge.subscribe.email")||"";console.log(t),e=parseInt(e),this.$prompt("题解将会通过邮件传递给您","请输入邮箱",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t||"",inputPattern:/[\w!#$%&'*+/=?^_`{|}~-]+(?:\.[\w!#$%&'*+/=?^_`{|}~-]+)*@(?:[\w](?:[\w-]*[\w])?\.)+[\w](?:[\w-]*[\w])?/,inputErrorMessage:"邮箱格式不正确"}).then(function(t){var a=t.value;console.log("email为",a),localStorage.setItem("challenge.subscribe.email",a),r({name:"challenge.subscribe",data:{challenge_id:e,email:a}}).then(function(e){0==e.status&&n.$confirm("信息已提交成功，请耐心等待","提示",{confirmButtonText:"确定",type:"success",showCancelButton:!1})})}).catch(function(){})}},data:function(){return{loading:!1,identifier:"",challenge_list:[],title:"关卡列表",shixun:{}}}},w={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",[e.shixun.name?t("h1",[e._v(e._s(e.shixun.name)+"\n    "),t("el-link",{attrs:{target:"_blank",type:"primary",href:"https://www.educoder.net/shixuns/"+e.identifier+"/challenges"}},[e._v("\n      打开实训\n      "),t("i",{staticClass:"el-icon-view el-icon--right"})])],1):e._e(),e._v(" "),t("h2",[e._v(e._s(e.title))]),e._v(" "),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[e.challenge_list?t("div",e._l(e.challenge_list,function(n){return t("div",{key:n.challenge_id,staticClass:"challenge-wrp"},[t("div",{staticClass:"challenge-item"},[t("i",{staticClass:"el-icon-circle-check"}),e._v(" "),t("span",[e._v("第"+e._s(n.position)+"关："+e._s(n.name))])]),e._v(" "),t("el-button",{staticClass:"operation",attrs:{type:"primary"},on:{click:function(t){return e.getAnalysis(n.challenge_id)}}},[e._v("\n            获取题解 \n        ")])],1)}),0):e._e()])])},staticRenderFns:[]};var x=t("VU/8")(m,w,!1,function(e){t("6ZYr")},"data-v-bffc9d44",null).exports;i.a.use(h.a);var _=new h.a({routes:[{path:"/",name:"index",redirect:{name:"shixuns"}},{path:"/shixun/:identifier",name:"shixun",component:x},{path:"/shixuns",name:"shixuns",component:v}]}),y=t("f/Qh"),k=t.n(y);i.a.config.productionTip=!1,i.a.use(k.a),new i.a({el:"#app",router:_,components:{App:l},template:"<App/>"})},Sj3z:function(e,n){},VPg6:function(e,n){},"f/Qh":function(e,n){e.exports=VueResource},lRwf:function(e,n){e.exports=Vue},pRNm:function(e,n){e.exports=VueRouter},rHzw:function(e,n){}},["NHnr"]);